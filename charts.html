<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Charts</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.0/Chart.bundle.js"></script>
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>




</head>

<body>
    <div class="chart1">
        <canvas id="pieChart"></canvas>
    </div>

    <button id="drawChart">Draw Chart</button>

    <!-- commenting our the bar charts, didn't really like it but keeping it for team to decide -->
    <!--div class="chart2">
        <canvas id="barChart"></canvas>
    </div -->
    <script>
        //-------------------------------------------------------------------------------------

        var query = "https://api.data.gov/ed/collegescorecard/v1/schools?fields=school.name,id,2014.student.demographics.race_ethnicity.white,2014.student.demographics.race_ethnicity.black,2014.student.demographics.race_ethnicity.hispanic,2014.student.demographics.race_ethnicity.asian,2014.student.demographics.race_ethnicity.aian,2014.student.demographics.race_ethnicity.nhpi,2014.student.demographics.race_ethnicity.two_or_more,2014.student.demographics.race_ethnicity.non_resident_alien,2014.student.demographics.race_ethnicity.unknown,2014.student.demographics.race_ethnicity.white_non_hispanic,2014.student.demographics.race_ethnicity.black_non_hispanic,2014.student.demographics.race_ethnicity.asian_pacific_islander&sort=2014.completion.rate_suppressed.overall:desc&api_key=ATN7AHDhDngU3Sb4EUtkVMaTkhUA1hr6dkDNro0A&school.name=university+texas+austin"

        var asian, black, white, hispanic, nRAlien, others;

        $.ajax({
            url: query,
            method: 'GET',
        }).done(function (school) {
            // console.log(query);
            console.log(school);
            white = school.results["0"]["2014.student.demographics.race_ethnicity.white"];
            nRAlien = (school.results["0"]["2014.student.demographics.race_ethnicity.non_resident_alien"]);
            hispanic = (school.results["0"]["2014.student.demographics.race_ethnicity.hispanic"]);
            black = (school.results["0"]["2014.student.demographics.race_ethnicity.black"]);
            asian = (school.results["0"]["2014.student.demographics.race_ethnicity.asian"]);
            others = 1 - (white + black + hispanic + asian + nRAlien);
            console.log(white, nRAlien, hispanic, black, asian, others);
        });// end of Ajax call
        //---------------------------------------------------------------------------------------
        // pie chart
        $(document).ready(function () {
            var ctx = document.getElementById("pieChart");
            console.log("white, nRAlien, hispanic, black, asian, others");

            console.log(white, nRAlien, hispanic, black, asian, others);

            //data fot pie chart
            data = {
                datasets: [{
                    backgroundColor: [
                        //set colors for chart
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)'
                    ],
                    //data for pie
                    data: [white, black, asian, hispanic, nRAlien, others]
                }],

                // These labels appear in the legend and in the tooltips when hovering different arcs
                labels: [
                    'Whilte',
                    'Black',
                    'Asian',
                    'Hispanic',
                    'Non Resident Alien',
                    'Others'
                ]
            };
            new Chart(ctx, {
                data: data,
                type: 'pie',
            });


            // bar part, i'll let the team decide on which one to use
            // Bar chart
            /*
                    var cht = document.getElementById("barChart");
                    //data fot bar chart
                    data = {
                        datasets: [{
                            backgroundColor: [
                                //set colors for chart
                                'rgba(255, 99, 132, 0.2)',
                                'rgba(54, 162, 235, 0.2)',
                                'rgba(255, 206, 86, 0.2)',
                                'rgba(75, 192, 192, 0.2)',
                                'rgba(153, 102, 255, 0.2)',
                                'rgba(255, 159, 64, 0.2)'
                            ],
                            //data for bar
                            data: [0.5, 0.6, 0.2, 0.1, 1.1, 0.8]
                        }],
            
                        // These labels appear in the legend and in the tooltips when hovering different arcs
                        labels: [
                            'Whilte',
                            'Black',
                            'Asian',
                            'pacific',
                            'native American',
                            'others'
                        ]
                    };
                    new Chart(ctx, {
                        data: data,
                        type: 'bar',
                    });
            
                    */
        }//end of $(document).ready(function() {
    </script>

    </canvas>
</body>

</html>